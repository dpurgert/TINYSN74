<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TINYSN74: src/tinysn74.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TINYSN74
   &#160;<span id="projectnumber">0.6.0</span>
   </div>
   <div id="projectbrief">ATTiny library for SN74HC595</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tinysn74.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Library to drive SN74HC595 chips with ATTiny microcontrollers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;avr/interrupt.h&gt;</code><br />
<code>#include &lt;util/delay.h&gt;</code><br />
<code>#include &quot;<a class="el" href="tinysn74__config_8h_source.html">tinysn74_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tinysn74_8h_source.html">tinysn74.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tinysn74.c:</div>
<div class="dyncontent">
<div class="center"><img src="tinysn74_8c__incl.png" border="0" usemap="#src_2tinysn74_8c" alt=""/></div>
<map name="src_2tinysn74_8c" id="src_2tinysn74_8c">
<area shape="rect" id="node4" href="tinysn74__config_8h.html" title="Master configuration file for the tinysn74 library. " alt="" coords="232,155,356,181"/>
<area shape="rect" id="node8" href="tinysn74_8h.html" title="tinysn74.h" alt="" coords="293,80,375,107"/>
<area shape="rect" id="node6" href="chips_8h_source.html" title="pinouts/chips.h" alt="" coords="295,229,405,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad72dbcf6d0153db1b8d8a58001feed83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ad72dbcf6d0153db1b8d8a58001feed83"><td class="mdescLeft">&#160;</td><td class="mdescRight">AVR Interrupt Library.  <a href="#ad72dbcf6d0153db1b8d8a58001feed83">More...</a><br /></td></tr>
<tr class="separator:ad72dbcf6d0153db1b8d8a58001feed83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4330aeed1c9cef86f25a77fc7d5c28e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#a4330aeed1c9cef86f25a77fc7d5c28e6">pulse</a>(port,  pin)&#160;&#160;&#160;port |= _BV(pin); port &amp;= ~_BV(pin);</td></tr>
<tr class="memdesc:a4330aeed1c9cef86f25a77fc7d5c28e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">sends a pulse to the pin (i.e. set logic high, then low)  <a href="#a4330aeed1c9cef86f25a77fc7d5c28e6">More...</a><br /></td></tr>
<tr class="separator:a4330aeed1c9cef86f25a77fc7d5c28e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8f7441d0691c9e378f74be062aa73e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#aa8f7441d0691c9e378f74be062aa73e1">hi</a>(port,  pin)&#160;&#160;&#160;port |= _BV(pin);</td></tr>
<tr class="memdesc:aa8f7441d0691c9e378f74be062aa73e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">pulls a pin logic high  <a href="#aa8f7441d0691c9e378f74be062aa73e1">More...</a><br /></td></tr>
<tr class="separator:aa8f7441d0691c9e378f74be062aa73e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd7cc1ea865db8275b9528b3dbb5793"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#a2bd7cc1ea865db8275b9528b3dbb5793">lo</a>(port,  pin)&#160;&#160;&#160;port &amp;= ~_BV(pin);</td></tr>
<tr class="memdesc:a2bd7cc1ea865db8275b9528b3dbb5793"><td class="mdescLeft">&#160;</td><td class="mdescRight">pulls a pin logic low  <a href="#a2bd7cc1ea865db8275b9528b3dbb5793">More...</a><br /></td></tr>
<tr class="separator:a2bd7cc1ea865db8275b9528b3dbb5793"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a75d55e672f3f4dd06cd0c73479f64ade"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#a75d55e672f3f4dd06cd0c73479f64ade">snInit</a> (void)</td></tr>
<tr class="memdesc:a75d55e672f3f4dd06cd0c73479f64ade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the library.  <a href="#a75d55e672f3f4dd06cd0c73479f64ade">More...</a><br /></td></tr>
<tr class="separator:a75d55e672f3f4dd06cd0c73479f64ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad06bf9aab33483c64594a58e072279fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#ad06bf9aab33483c64594a58e072279fe">snCLR</a> (void)</td></tr>
<tr class="memdesc:ad06bf9aab33483c64594a58e072279fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the output register.  <a href="#ad06bf9aab33483c64594a58e072279fe">More...</a><br /></td></tr>
<tr class="separator:ad06bf9aab33483c64594a58e072279fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8f256b6c1b7e959f1d486b8796cb58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#ace8f256b6c1b7e959f1d486b8796cb58">snOE</a> (uint8_t off)</td></tr>
<tr class="memdesc:ace8f256b6c1b7e959f1d486b8796cb58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable / disable SN74 outputs.  <a href="#ace8f256b6c1b7e959f1d486b8796cb58">More...</a><br /></td></tr>
<tr class="separator:ace8f256b6c1b7e959f1d486b8796cb58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f372294bcbd3d976f30953e2aaeb1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#ac9f372294bcbd3d976f30953e2aaeb1b">snShiftInit</a> (void)</td></tr>
<tr class="memdesc:ac9f372294bcbd3d976f30953e2aaeb1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the shifting logic.  <a href="#ac9f372294bcbd3d976f30953e2aaeb1b">More...</a><br /></td></tr>
<tr class="separator:ac9f372294bcbd3d976f30953e2aaeb1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedfd23cb2c8f35f1fd274ad3d9395ad8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#aedfd23cb2c8f35f1fd274ad3d9395ad8">snShift</a> (uint8_t *b)</td></tr>
<tr class="memdesc:aedfd23cb2c8f35f1fd274ad3d9395ad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shifting logic to get data from the micro to the shift registers.  <a href="#aedfd23cb2c8f35f1fd274ad3d9395ad8">More...</a><br /></td></tr>
<tr class="separator:aedfd23cb2c8f35f1fd274ad3d9395ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57a50787422eaee268c496d51f8dc00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinysn74_8c.html#ae57a50787422eaee268c496d51f8dc00">snLat</a> (void)</td></tr>
<tr class="memdesc:ae57a50787422eaee268c496d51f8dc00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Latcn data from SN74's internal shift register to the output.  <a href="#ae57a50787422eaee268c496d51f8dc00">More...</a><br /></td></tr>
<tr class="separator:ae57a50787422eaee268c496d51f8dc00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Library to drive SN74HC595 chips with ATTiny microcontrollers. </p>
<p>This library provides the necessary hooks for you to control Texas Instruments SN74HC595 shift registers (or equivalent). </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad72dbcf6d0153db1b8d8a58001feed83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad72dbcf6d0153db1b8d8a58001feed83">&#9670;&nbsp;</a></span>DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AVR Interrupt Library. </p>
<p>AVR IO LibraryFor _delay_ms() Library configuration file Library headers DEBUG = 1 for debugging / slowing things down </p>

</div>
</div>
<a id="aa8f7441d0691c9e378f74be062aa73e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8f7441d0691c9e378f74be062aa73e1">&#9670;&nbsp;</a></span>hi</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hi</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pin&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;port |= _BV(pin);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>pulls a pin logic high </p>

</div>
</div>
<a id="a2bd7cc1ea865db8275b9528b3dbb5793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd7cc1ea865db8275b9528b3dbb5793">&#9670;&nbsp;</a></span>lo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lo</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pin&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;port &amp;= ~_BV(pin);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>pulls a pin logic low </p>

</div>
</div>
<a id="a4330aeed1c9cef86f25a77fc7d5c28e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4330aeed1c9cef86f25a77fc7d5c28e6">&#9670;&nbsp;</a></span>pulse</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pulse</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">port, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pin&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;port |= _BV(pin); port &amp;= ~_BV(pin);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sends a pulse to the pin (i.e. set logic high, then low) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad06bf9aab33483c64594a58e072279fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06bf9aab33483c64594a58e072279fe">&#9670;&nbsp;</a></span>snCLR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snCLR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the output register. </p>
<p>This function will clear all outputs of the connected SN74 chips, without having to shift in N bytes of 0x00 </p>

</div>
</div>
<a id="a75d55e672f3f4dd06cd0c73479f64ade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75d55e672f3f4dd06cd0c73479f64ade">&#9670;&nbsp;</a></span>snInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the library. </p>
<p>This function sets up the ports / pins of the ATTINY to output, and clears the output registers of the connected shift register(s). </p>

</div>
</div>
<a id="ae57a50787422eaee268c496d51f8dc00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae57a50787422eaee268c496d51f8dc00">&#9670;&nbsp;</a></span>snLat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snLat </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Latcn data from SN74's internal shift register to the output. </p>
<p>This function is what actually sets the output pins to the value contained in the input shift register. Without calling this, the pins will never go logic high (or logic low). </p>

</div>
</div>
<a id="ace8f256b6c1b7e959f1d486b8796cb58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace8f256b6c1b7e959f1d486b8796cb58">&#9670;&nbsp;</a></span>snOE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snOE </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>off</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable / disable SN74 outputs. </p>
<p>If the snOE option is enabled (see tinysn47_config.h), this function will allow you to enable or disable the output register.</p>
<p>Note that when disabled, the output register retains its previous value - the pins are simply put into high-impedance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">off</td><td>uint8_t value to pass a '0' or '1'. As the chip uses logic low, setting off to '0' will ENABLE the output register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aedfd23cb2c8f35f1fd274ad3d9395ad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedfd23cb2c8f35f1fd274ad3d9395ad8">&#9670;&nbsp;</a></span>snShift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snShift </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shifting logic to get data from the micro to the shift registers. </p>
<p>This function comes in two (2) forms, determined by your selection of DATA_XFER_MOD in <a class="el" href="tinysn74__config_8h.html" title="Master configuration file for the tinysn74 library. ">tinysn74_config.h</a>.</p>
<p>In bitbang mode (default), the function utilizes a for loop to iterate over the array of chip data. In SPI mode, the SPI output register and timers are utilized to iterate over the data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*b</td><td>is the pointer to the chip array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac9f372294bcbd3d976f30953e2aaeb1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f372294bcbd3d976f30953e2aaeb1b">&#9670;&nbsp;</a></span>snShiftInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snShiftInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the shifting logic. </p>
<p>This function comes in two (2) forms, determined by your selection of DATA_XFER_MOD in <a class="el" href="tinysn74__config_8h.html" title="Master configuration file for the tinysn74 library. ">tinysn74_config.h</a>.</p>
<p>In bitbang mode (default); the function merely sets pins; whereas in SPI mode, the function will also initialize the timers and SPI "baudrate". </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
