<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TINYSN74: examples/SN74_RandomBlink/SN74_RandomBlink.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TINYSN74
   &#160;<span id="projectnumber">0.6.0</span>
   </div>
   <div id="projectbrief">ATTiny library for SN74HC595</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_2ee52d4216aaa8bc0572edd71c4a678b.html">SN74_RandomBlink</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SN74_RandomBlink.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A more involved example.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="tinysn74_8h_source.html">tinysn74.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SN74_RandomBlink.ino:</div>
<div class="dyncontent">
<div class="center"><img src="SN74__RandomBlink_8ino__incl.png" border="0" usemap="#examples_2SN74__RandomBlink_2SN74__RandomBlink_8ino" alt=""/></div>
<map name="examples_2SN74__RandomBlink_2SN74__RandomBlink_8ino" id="examples_2SN74__RandomBlink_2SN74__RandomBlink_8ino">
<area shape="rect" id="node2" href="tinysn74_8h.html" title="tinysn74.h" alt="" coords="64,95,147,121"/>
<area shape="rect" id="node3" href="tinysn74__config_8h.html" title="Master configuration file for the tinysn74 library. " alt="" coords="43,169,167,196"/>
<area shape="rect" id="node5" href="chips_8h_source.html" title="pinouts/chips.h" alt="" coords="106,244,217,271"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program initialization.  <a href="#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9069fa50959f53362dad0f5038f45d60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#a9069fa50959f53362dad0f5038f45d60">randlite</a> ()</td></tr>
<tr class="memdesc:a9069fa50959f53362dad0f5038f45d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Randomly select the chip and pin to change state.  <a href="#a9069fa50959f53362dad0f5038f45d60">More...</a><br /></td></tr>
<tr class="separator:a9069fa50959f53362dad0f5038f45d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main program loop.  <a href="#afe461d27b9c48d5921c00d521181f12f">More...</a><br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aab45faad5b835d77a869fca4747ab75d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#aab45faad5b835d77a869fca4747ab75d">chp</a> = 0</td></tr>
<tr class="memdesc:aab45faad5b835d77a869fca4747ab75d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chip select value.  <a href="#aab45faad5b835d77a869fca4747ab75d">More...</a><br /></td></tr>
<tr class="separator:aab45faad5b835d77a869fca4747ab75d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a4ecf3125fbcc9447f70f7361f2fb0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#ad1a4ecf3125fbcc9447f70f7361f2fb0">rnd</a> = 0</td></tr>
<tr class="memdesc:ad1a4ecf3125fbcc9447f70f7361f2fb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">RNG value.  <a href="#ad1a4ecf3125fbcc9447f70f7361f2fb0">More...</a><br /></td></tr>
<tr class="separator:ad1a4ecf3125fbcc9447f70f7361f2fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc5cfe94d996891a734c6c645f44e45"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#a4bc5cfe94d996891a734c6c645f44e45">chip</a> [NUMSN74]</td></tr>
<tr class="memdesc:a4bc5cfe94d996891a734c6c645f44e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chip array.  <a href="#a4bc5cfe94d996891a734c6c645f44e45">More...</a><br /></td></tr>
<tr class="separator:a4bc5cfe94d996891a734c6c645f44e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74fac0365dddec359ec40da99dde9d8a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#a74fac0365dddec359ec40da99dde9d8a">pina</a> [8] ={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80}</td></tr>
<tr class="memdesc:a74fac0365dddec359ec40da99dde9d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer to pin conversion.  <a href="#a74fac0365dddec359ec40da99dde9d8a">More...</a><br /></td></tr>
<tr class="separator:a74fac0365dddec359ec40da99dde9d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc166123fed68e9b34a2512623163e0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#a6dc166123fed68e9b34a2512623163e0">on</a> = 1</td></tr>
<tr class="memdesc:a6dc166123fed68e9b34a2512623163e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicator for enabling outputs.  <a href="#a6dc166123fed68e9b34a2512623163e0">More...</a><br /></td></tr>
<tr class="separator:a6dc166123fed68e9b34a2512623163e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaefdb10b18059f3c08332338630b3f68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#aaefdb10b18059f3c08332338630b3f68">wait</a> =0</td></tr>
<tr class="memdesc:aaefdb10b18059f3c08332338630b3f68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate loop should delay.  <a href="#aaefdb10b18059f3c08332338630b3f68">More...</a><br /></td></tr>
<tr class="separator:aaefdb10b18059f3c08332338630b3f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27e3188294c2df66d975b74a09c001d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SN74__RandomBlink_8ino.html#af27e3188294c2df66d975b74a09c001d">i</a> =0</td></tr>
<tr class="memdesc:af27e3188294c2df66d975b74a09c001d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for walking the chip array.  <a href="#af27e3188294c2df66d975b74a09c001d">More...</a><br /></td></tr>
<tr class="separator:af27e3188294c2df66d975b74a09c001d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A more involved example. </p>
<p>This example sketch shows how this library can be utilized to create complex effects. In this case, we're selecting a random pin on a random chip to light. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main program loop. </p>
<p>Infinite loop to continually call <a class="el" href="SN74__RandomBlink_8ino.html#a9069fa50959f53362dad0f5038f45d60" title="Randomly select the chip and pin to change state. ">randlite()</a>, and wait 100 ms after every execution. </p>

</div>
</div>
<a id="a9069fa50959f53362dad0f5038f45d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9069fa50959f53362dad0f5038f45d60">&#9670;&nbsp;</a></span>randlite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void randlite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Randomly select the chip and pin to change state. </p>
<p>Provided that NUMSN74 &gt;1, this will randomly select a pin and chip from their respective arrays, and set the output state accordingly. Once the data is shifted out and latched in, the function determines if the whole array's outputs are logic high or logic low, in order to determine if the other cycle should be started. </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Program initialization. </p>
<p>Runs once at power on or microcontroller reset. Calls <a class="el" href="tinysn74_8c.html#a75d55e672f3f4dd06cd0c73479f64ade" title="Initializes the library. ">snInit()</a> and seeds the PRNG with the number of microseconds since the chip (re) booted. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4bc5cfe94d996891a734c6c645f44e45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bc5cfe94d996891a734c6c645f44e45">&#9670;&nbsp;</a></span>chip</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t chip[NUMSN74]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chip array. </p>
<p>8-bit unsigned integer array holds the values for the pin(s) that are active on any one chip.</p>
<p>Array is in "most significant chip first" order &ndash; that is, chip[0] is the SN74HC595 chip that is farthest away. chip[NUMSN74-1] is the chip directly connected to MOSI </p>

</div>
</div>
<a id="aab45faad5b835d77a869fca4747ab75d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab45faad5b835d77a869fca4747ab75d">&#9670;&nbsp;</a></span>chp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t chp = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chip select value. </p>
<p>uint8_t as 255 is more than a Tiny2x or 4x chip can run; so this saves a bit of RAM. Change to uint16_t if you're using a Tiny8x and want to run more than 255 SN74HC595 </p>

</div>
</div>
<a id="af27e3188294c2df66d975b74a09c001d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af27e3188294c2df66d975b74a09c001d">&#9670;&nbsp;</a></span>i</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t i =0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Counter for walking the chip array. </p>
<p>Set to uint8_t, as Tiny2x/4x will never exceed 255 SN74 chips; so this saves some RAM. Change to uint16_t for a tiny8x if you choose to use more than 255 chips. </p>

</div>
</div>
<a id="a6dc166123fed68e9b34a2512623163e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc166123fed68e9b34a2512623163e0">&#9670;&nbsp;</a></span>on</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t on = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicator for enabling outputs. </p>
<p>When 1, the output selected in this run will be set logic high. When 0, output will be set to logic low. </p>

</div>
</div>
<a id="a74fac0365dddec359ec40da99dde9d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74fac0365dddec359ec40da99dde9d8a">&#9670;&nbsp;</a></span>pina</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t pina[8] ={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Integer to pin conversion. </p>
<p>If we just used a value 0-255, we'd get however many pins lit, corresponding to the decimal -&gt; binary conversion of a random number. That is, if we fed chip[n] a value of 133, pins 8, 3, and 1 would light (corresponding to 128 + 4 + 1), and that's not what we want.</p>
<p>ArrayValue = Hex (decimal)</p><ul>
<li>[0] = 0x01 (1)</li>
<li>[1] = 0x02 (2)</li>
<li>[2] = 0x04 (4)</li>
<li>[3] = 0x08 (8)</li>
<li>[4] = 0x10 (16)</li>
<li>[5] = 0x20 (32)</li>
<li>[6] = 0x40 (64)</li>
<li>[7] = 0x80 (128) </li>
</ul>

</div>
</div>
<a id="ad1a4ecf3125fbcc9447f70f7361f2fb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a4ecf3125fbcc9447f70f7361f2fb0">&#9670;&nbsp;</a></span>rnd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rnd = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RNG value. </p>
<p>Value for the pin we're going to light </p>

</div>
</div>
<a id="aaefdb10b18059f3c08332338630b3f68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaefdb10b18059f3c08332338630b3f68">&#9670;&nbsp;</a></span>wait</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait =0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate loop should delay. </p>
<p>When 1, loop will delay for N seconds (default 5) before switching state. That is, if all the outputs just finished going logic high, wait before setting random outputs to logic low (or vice-versa). </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
